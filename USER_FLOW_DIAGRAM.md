# Virtupay Corporate - User Flow Diagram

## System Overview

This document outlines the complete user journey through the Virtupay Corporate virtual card management system.

---

## 1. Authentication & Authorization Flow

```
???????????????????????????????????????????????????????????????????
?   AUTHENTICATION FLOW       ?
???????????????????????????????????????????????????????????????????

 START
        ?
      ?
          ?????????????????????????
         ?  User Visits Website  ?
     ?????????????????????????
  ?
                ?????????????????????????????????
     ?           ?
        ? ?
  ???????????????????? ????????????????????
        ?  New User? ?     ?  Existing User?  ?
        ?  (No Account)    ?    ?  (Has Account)   ?
        ????????????????????          ????????????????????
       ?     ?
    ?  ?
        ????????????????????          ????????????????????
        ?  Registration    ?          ?Login Page      ?
        ?  Page    ?          ?  ?
        ?  - Email   ?   ?  - Email         ?
        ?  - Password      ?          ?  - Password ?
        ?  - Full Name     ?      ????????????????????
        ?  - Department ?    ?
   ????????????????????        ?
  ?          ????????????????????
     ?  ? Authenticate     ?
   ?        ? Credentials   ?
            ?   ????????????????????
            ?          ?
       ?????????????????????????????
      ?
      ?????????????????????????
                 ?  Generate JWT Token   ?
    ?  (Valid 24 Hours)     ?
             ?????????????????????????
     ?
           ?????????????????????????
     ?  Store Token in       ?
      ?  Browser (localStorage?
              ?  or sessionStorage)   ?
         ?????????????????????????
    ?
  ?????????????????????????
?  User Successfully    ?
              ?  Authenticated        ?
 ?         ?
            ?  Token Added to     ?
       ?  Authorization Header ?
 ?  for All API Calls    ?
       ?????????????????????????
      ?
              ?
              ????????????????
      ?  DASHBOARD   ?
      ?  (Main Hub)  ?
   ????????????????

```

---

## 2. Main Dashboard Navigation Flow

```
???????????????????????????????????????????????????????????????????
?    MAIN DASHBOARD MENU          ?
???????????????????????????????????????????????????????????????????

           DASHBOARD HOME
        ?
         ?????????????????????????????????????
    ?        ?  ?
         ?          ?       ?
    ???????????    ????????????????   ????????????????
    ? CARDS   ? ? TRANSACTIONS ?   ? APPROVALS    ?
    ? MENU    ?    ? MENU         ?   ? MENU         ?
    ???????????    ???????????????? ????????????????
         ?    ?      ?
    ???????????? ????????????  ?????????????
    ?    ?      ?     ?      ?        ?
    ?           ?    ?          ?      ?        ?
??????????? ???????? ???????? ??????? ??????????? ??????????
?View All ? ?Create? ?View  ? ?Create? ?Pending  ? ?Approval?
? Cards ? ? Card ? ?Trans-? ?Trans-? ?Approvals? ?History ?
?         ? ?      ? ?actions? ?action? ?For Me   ? ??
??????????? ???????? ???????? ??????? ??????????? ??????????
     ?       ?         ?         ?
     ?       ?         ?  ?
     ?       ?  ?       ?
     ?   ????????????????????????         ?
     ?     ?  ?
     ?     ?    ?
?????????????????????????         ??????????????????
? Card Management       ?         ? Approvals Work ?
? Operations            ?         ? Queue ?
?????????????????????????   ??????????????????


         ????????????????????
         ? AUDIT & REPORTS  ?
         ? (Admin/Auditor)  ?
     ????????????????????
              ?
         ???????????????????
         ?         ?
         ?   ?
    ???????????   ????????????
    ?View  ?        ?Export    ?
    ?Audit    ?        ?Reports   ?
    ?Logs     ?        ?(CSV/JSON)?
    ???????????        ????????????

```

---

## 3. Card Management User Flow

```
???????????????????????????????????????????????????????????????????
?      CARD MANAGEMENT FLOW      ?
???????????????????????????????????????????????????????????????????

           CARDS PAGE
        ?
        ?????????????????????????????????
        ?    ?               ?
        ?         ?          ?
   ???????????   ????????????    ????????????
   ?Browse   ?   ?Create    ?    ?Search    ?
   ?All      ?   ?New Card  ?    ?Filter    ?
   ?Cards    ?   ?       ?    ?Cards     ?
   ???????????   ????????????    ????????????
        ?        ?      ?
     ?        ?  ?
      ?       ???????????????????   ?
     ?       ?Card Form     ?   ?
        ?       ? - Cardholder ?   ?
     ?   ?   Name       ?   ?
        ?       ? - Nickname      ?   ?
        ?       ? - Department    ?   ?
        ?       ???????????????????   ?
        ?              ?  ?
        ? ?          ?
     ?       ????????????????????  ?
   ?       ?Submit Card       ?  ?
        ?       ?Creation Request  ?  ?
  ?       ????????????????????  ?
        ??   ?
        ???????????????????????????????
      ?              ?
         ?  ?
        ??????????????????????????????
        ?   VIEW CARD DETAILS  ?
        ? - Card Number (Masked)     ?
        ? - Cardholder Name      ?
        ? - Status (ACTIVE/FROZEN)   ?
      ? - Expiry Date     ?
        ? - Created Date             ?
 ??????????????????????????????
  ?
        ???????????????????
      ?      ?
        ?         ?
   ???????????????   ??????????????????????
   ?Card Status  ?   ?Card Actions Menu   ?
   ?Operations   ?   ?      ?
   ???????????????   ??????????????????????
   ?
   ??????????????????????????????????????????????
         ?          ?  ?
         ?  ?        ?
    ???????????     ????????????  ????????????
    ?Freeze   ??Unfreeze  ?          ?Delete    ?
    ?Card     ?     ?Card      ?    ?Card      ?
    ?         ?  ?          ?     ?    ?
    ???????????          ????????????      ????????????
         ?         ?       ?
         ?     ?        ?
    ???????????          ????????????       ????????????
    ?Submit   ?  ?Submit    ?          ?Submit    ?
    ?Freeze   ?          ?Unfreeze  ? ?Delete    ?
    ?Request  ?   ?Request   ?        ?Request   ?
    ?(Need    ?    ?(Auto-    ?      ?(Need     ?
    ?Approval)?     ?Complete) ?          ?Approval) ?
    ???????????          ????????????   ????????????
     ?      ?       ?
         ?????????????????????????????????????????????
   ?
            ?
 ??????????????????????
      ? ACTION SUBMITTED   ?
? (Pending Approval) ?
      ??????????????????????


    ????????????????????????????
    ? CARD BALANCE & LIMITS    ?
    ????????????????????????????
     ?
???????????????????
        ?    ?
        ?     ?
    ???????????      ????????????????
    ?View     ?  ?Manage ?
    ?Balance  ?      ?Spending      ?
    ?Details  ?      ?Limits        ?
  ???????????      ????????????????
    ?      ?
      ?       ?
    ???????????      ????????????????
    ?Available?      ?Set Limit     ?
    ?Balance  ?      ?Type:    ?
    ?Reserved ?    ? - DAILY      ?
    ?Balance  ?      ? - WEEKLY     ?
    ?Used     ?      ? - MONTHLY    ?
    ?Balance  ?   ? - PER_TRANS  ?
    ???????????      ????????????????
 ?       ?
       ?           ?
    ???????????      ????????????????
    ?Fund     ?      ?Set Amount &  ?
    ?Balance  ?      ?Threshold     ?
    ?(Add $)  ?      ?     ?
    ???????????      ????????????????
         ?         ?
   ?         ?
    ????????????????????????????
    ? Changes Persisted        ?
    ? Audit Log Updated        ?
    ????????????????????????????

```

---

## 4. Transaction Management Flow

```
???????????????????????????????????????????????????????????????????
?  TRANSACTION MANAGEMENT FLOW         ?
???????????????????????????????????????????????????????????????????

 TRANSACTIONS PAGE
 ?
        ?????????????????????????????????
?     ?         ?
        ??               ?
   ???????????   ????????????    ????????????????
   ?Browse   ?   ?Create    ?    ?Filter by:    ?
   ?All  ?   ?New       ?    ? - Date Range ?
   ?Trans-   ?   ?Transact- ?    ? - Merchant   ?
   ?actions  ?   ?ion       ?    ? - Amount ?
   ?         ?   ?          ?    ? - Status  ?
   ???????????   ????????????    ????????????????
        ?         ?      ?
     ?        ?     ?
        ?      ????????????????????  ?
        ?      ?Transaction Form  ?  ?
        ?      ? - Select Card    ?  ?
        ?      ? - Amount       ?  ?
        ?  ? - Merchant Name  ?  ?
      ?      ? - Category Code  ?  ?
        ?      ? - Reference ID   ?  ?
        ?      ????????????????????  ?
        ?    ?       ?
        ?          ?     ?
 ?      ????????????????????  ?
   ?      ?Validate          ?  ?
        ?      ?Transaction ?  ?
        ?      ? - Check Balance?  ?
        ?      ? - Verify Limits  ?  ?
        ?      ? - Card Active    ?  ?
   ?      ????????????????????  ?
  ?           ?              ?
        ?  ?    ?
   ?      ????????????????????  ?
        ?      ?Submit Trans.     ?  ?
        ? ?Status: PENDING   ?  ?
      ?      ????????????????????  ?
        ?        ?            ?
        ??????????????????????????????
      ?   ?
         ?  ?
        ????????????????????????????
        ? VIEW TRANSACTION DETAILS ?
        ?          ?
        ? - Amount         ?
        ? - Merchant        ?
        ? - Status (PENDING/       ?
        ?   COMPLETED/REVERSED)    ?
        ? - Created Date      ?
        ? - Completed Date ?
        ? - Dispute Status   ?
        ????????????????????????????
?
    ???????????????????
        ?    ?
      ? ?
    ?????????????????????????????????
    ?Transaction  ?  ?For Admins Only:?
    ?Status:      ?  ?      ?
    ?PENDING      ?  ?- Complete      ?
    ?             ?  ?- Reverse       ?
    ? (Awaiting   ?  ?- Dispute    ?
    ?  approval)  ?  ?  ?
    ???????????????  ??????????????????
      ?        ?
           ?               ?
    ????????????????  ??????????????????
    ?User may:     ?  ?Submit Action   ?
    ?   ?  ?Request          ?
    ?- Dispute    ?  ?(May need        ?
    ?  Transaction?  ?Approval)     ?
    ? ?  ?          ?
    ?- View in    ?  ?After approval: ?
    ?  Transaction?  ?Status Updates  ?
    ?  History  ?  ?              ?
    ???????????????  ??????????????????
   ?       ?
     ????????????????????
      ?
     ?
        ????????????????????????
        ? Transaction History  ?
        ? Updated     ?
        ? Audit Log Entry?
        ? Created        ?
????????????????????????


  ????????????????????????????????
    ? TRANSACTION ANALYTICS   ?
    ? (Summary View)     ?
    ????????????????????????????????
         ?
             ?
    ????????????????????????????????
    ? Transaction Summary:         ?
    ? - Total Completed: $X,XXX    ?
    ? - Total Pending: $XXX    ?
    ? - Total Reversed: $XXX       ?
    ? - Count by Merchant          ?
    ? - Date Range Stats  ?
    ????????????????????????????????

```

---

## 5. Approval Workflow

```
???????????????????????????????????????????????????????????????????
?              APPROVAL WORKFLOW FOR SENSITIVE ACTIONS       ?
???????????????????????????????????????????????????????????????????

         SENSITIVE ACTION INITIATED
           (Freeze/Delete/Change Limits)
  ?
 ?
      ?????????????????????????
            ? System Determines     ?
            ? Required Approver:    ?
  ?            ?
            ? DELETE_CARD  ? CEO    ?
            ? FREEZE_CARD  ? CFO ?
? CHANGE_LIMITS? CFO    ?
    ? CREATE_CARD  ? Admin  ?
          ?????????????????????????
            ?
            ?
            ?????????????????????????
            ? Create Approval       ?
? Request Record        ?
    ?                 ?
            ? Status: PENDING       ?
     ? Expires in: 48 Hours  ?
       ?????????????????????????
            ?
        ?????????????????
     ?               ?
       ?         ?
        ????????????????  ????????????????
        ? Notify     ?  ? Request sits ?
    ? Approver     ?  ? in work queue?
  ? (Email/Push) ?  ? for approver ?
        ????????????????  ????????????????


???????????????????????????????????????????????????????????????????
?            APPROVER'S VIEW - APPROVALS PAGE       ?
???????????????????????????????????????????????????????????????????

     APPROVALS DASHBOARD
     ?
        ?????????????????????????
  ?           ?         ?
   ?         ?   ?
   ??????????? ??????????? ????????????
   ?Pending  ? ?Approval ? ?Approval  ?
   ?Approvals? ?History  ? ?Details   ?
   ?For Me   ? ?       ? ?      ?
   ??????????? ??????????? ????????????
        ?
        ?
   ????????????????????????
   ? Pending Approvals    ?
   ? List (in order):     ?
   ?   ?
   ? 1. Action Type       ?
   ?    Requested By      ?
   ?    Card ID   ?
   ?    Created Date      ?
   ?    Expires In        ?
   ?     ?
   ? 2. [Next approval]   ?
   ????????????????????????
    ?
    ?????????????????
    ?         ?
    ?  ?
??????????????? ????????????????
?Review       ? ?Review        ?
?Approval #1  ? ?Approval Details
? ? ??
?Click to     ? ?Action Type   ?
?Expand       ? ?Requested By  ?
??????????????? ?Card Details  ?
       ?        ?Action Data   ?
       ?  ?Created Date  ?
       ?        ?Expires Date  ?
       ?        ????????????????
       ?               ?
       ?               ?
   ???????????     ????????????
   ?Actions: ?     ?Approval  ?
   ? ?     ?Controls  ?
   ?[APPROVE]?     ?          ?
   ?[REJECT] ?     ?[APPROVE] ?
   ?         ?  ?[REJECT]  ?
   ???????????     ????????????
        ?               ?
        ?????????????????
       ?
        ????????????????????
  ?         ?
        ?    ?
    ???????????????  ????????????????
    ?Select       ?  ?Select REJECT ?
    ?APPROVE      ?  ?Option        ?
    ? ?  ? ?
    ?Optional:?  ?Write Reason: ?
    ?Add Comment  ?  ?"Not needed"  ?
    ?       ?  ?      ?
    ???????????????  ????????????????
  ?      ?
         ?                ?
    ????????????????????????????
    ? Submit Decision   ?
    ?    ?
  ? APPROVED / REJECTED      ?
    ? Status Updated       ?
    ? Audit Log Entry Created  ?
    ? Notification Sent    ?
  ????????????????????????????


   OUTCOME
       ?
        ?????????????????
        ?          ?
        ?       ?
  ???????????    ????????????
    ?APPROVED ?    ?REJECTED  ?
    ?         ?    ?        ?
    ?Action   ?    ?Action    ?
    ?Executes ?    ?Cancelled ?
    ?         ?    ?          ?
    ?e.g.     ?    ?User can: ?
    ?Card  ?    ?- Submit  ?
    ?Frozen   ??  new     ?
    ?Status   ?    ?  request ?
    ?Changed  ?    ?- Contact ?
    ?    ?    ?  approver?
    ???????????    ????????????

```

---

## 6. Audit & Compliance Flow

```
???????????????????????????????????????????????????????????????????
?        AUDIT & COMPLIANCE TRACKING         ?
???????????????????????????????????????????????????????????????????

          Available for: Admin, Auditor, CEO, CFO

          AUDIT PAGE
        ?
        ?????????????????????????
        ?   ?           ?
        ?           ?           ?
   ??????????? ??????????? ????????????
   ?View All ? ?Filter   ? ?Export    ?
   ?Audit ? ?by:    ? ?Report    ?
   ?Logs     ? ?         ? ?   ?
   ?? ?- Date   ? ?(CSV/JSON)?
   ?     ? ?- User   ? ?          ?
   ?   ? ?- Action ? ?          ?
   ?      ? ?- Card   ? ?  ?
   ??????????? ??????????? ????????????
   ?           ?      ?
        ??????????????????????????
        ?           ?
       ?           ?
    ????????????????????????????????
    ? Audit Log Entry:   ?
    ?       ?
    ? - User ID / Name ?
    ? - Timestamp    ?
    ? - Action (CREATE, UPDATE,    ?
    ?   DELETE, APPROVE, etc)      ?
    ? - Resource Type (Card, Trans,?
    ?   Approval)    ?
    ? - Resource ID  ?
    ? - Changes Made     ?
    ? - IP Address            ?
    ? - Status (SUCCESS/FAILED)    ?
    ? - Error Message (if any)     ?
    ????????????????????????????????

```

---

## 7. User Profile & Settings Flow

```
???????????????????????????????????????????????????????????????????
?      USER PROFILE & SETTINGS FLOW       ?
???????????????????????????????????????????????????????????????????

        USER PROFILE MENU
          ?
        ????????????????????????????
        ?       ?        ?
        ?     ?             ?
   ???????????  ????????????  ???????????
   ?View     ?  ?Change    ?  ?Profile  ?
   ?Profile  ?  ?Password  ?  ?Settings ?
   ?Details  ?  ?          ?  ?         ?
   ???????????  ????????????  ???????????
        ?      ?   ?
        ?            ?        ?
   ???????????  ????????????  ????????????
   ?Name ?  ?Current   ?  ?Department?
   ?Email    ?  ?Password  ?  ?Preferences
   ?Role ?  ?       ?  ?   ?
   ?Depart.  ?  ?New       ?  ?Language  ?
   ?Status   ?  ?Password  ?  ?Timezone  ?
   ?Created  ?  ?          ?  ?          ?
   ?         ?  ?Confirm   ?  ?Notifications?
   ?      ?  ?          ?  ?          ?
   ???????????  ????????????  ???????????
           ? ?
         ?           ?
    ????????????  ????????????
      ?Submit    ?  ?Save      ?
    ?Change    ?  ?Changes ?
       ?Password  ?  ?          ?
     ?Request   ?  ?Password  ?
 ?          ?  ?Updated   ?
         ?Password  ??Audit Log ?
          ?Updated   ?  ?Entry?
           ?Session   ?  ?Created   ?
     ?Refreshed ?  ?    ?
     ????????????  ????????????


  LOGOUT FLOW
      ?
          ?
        ?????????????????????????
        ? User Clicks Logout    ?
        ?????????????????????????
  ?
      ?
        ?????????????????????????
        ? Clear JWT Token from  ?
    ? Browser Storage       ?
      ?????????????????????????
     ?
           ?
      ?????????????????????????
        ? Redirect to Login Page?
   ? Session Closed        ?
        ?????????????????????????

```

---

## 8. Error Handling & User Feedback

```
???????????????????????????????????????????????????????????????????
?           ERROR HANDLING & USER FEEDBACK    ?
???????????????????????????????????????????????????????????????????

     ACTION / API CALL INITIATED
          ?
        ?????????????????????????
        ?            ?
    ?               ?
    ??????????? ????????????
    ?Request  ?   ?Loading   ?
    ?Sent to  ?      ?Indicator ?
    ?API ?            ?Shown     ?
    ???????????     ????????????
         ?
    ?????????????????
    ?           ?
    ?     ?
??????????? ????????????????
?Success  ?    ?Error/Failure ?
?200-201  ?    ?400/401/500   ?
???????????    ????????????????
  ?          ?
?                ?
???????????    ????????????????????????
?Display  ?    ?Show Error Message:   ?
?Success  ?    ?     ?
?Message  ?    ?- Validation Error    ?
?(Toast)  ?    ?- "Amount invalid"    ?
?   ?    ?- Unauthorized?
?- "Card  ?    ?- "Need CEO approval" ?
?  Created?    ?- Server Error      ?
?  "      ?    ?- "Try again later"   ?
?      ?    ?    ?
?Update UI?    ?Allow User to:     ?
?with New ?    ?- Retry   ?
?Data     ? ?- Edit Input          ?
?     ?    ?- Go Back?
???????????    ????????????????????????

  Forms with Validation
        ?
         ???????????????????????
         ?      ?
   ?    ?
    ???????????       ????????????
    ?Valid    ?           ?Invalid   ?
    ?Input    ?           ?Input     ?
    ???????????  ????????????
         ?          ?
  ?      ?
    ???????????           ????????????????
    ?Submit   ?           ?Highlight    ?
    ?Enabled  ?         ?Error Fields  ?
    ?         ?      ?          ?
    ?API Call ?           ?Show Error    ?
    ?Proceeds ?        ?Messages for: ?
    ?      ? ?- Required ?
    ?         ?           ?  fields      ?
    ?     ?         ?- Range       ?
    ?         ?           ?  violations  ?
    ?         ?    ?- Format      ?
 ? ?           ?  issues    ?
    ?         ?        ?         ?
    ?         ? ?Submit  ?
    ?         ?           ?Disabled      ?
    ???????????           ????????????????

```

---

## 9. Complete User Journey Example: Create Card ? Fund ? Make Transaction

```
???????????????????????????????????????????????????????????????????
?     COMPLETE WORKFLOW: CREATE CARD ? FUND ? TRANSACTION         ?
???????????????????????????????????????????????????????????????????

STEP 1: LOGIN
  ?? User logs in with credentials
  ?? Receives JWT token
  ?? Token stored in browser

STEP 2: NAVIGATE TO CARDS
  ?? User clicks "Cards" in navigation
  ?? Sees list of existing cards
  ?? Clicks "Create New Card"

STEP 3: CREATE CARD
  ????????????????????????????????????????
  ? Form appears:          ?
  ? - Cardholder Name: "John Doe"  ?
  ? - Nickname: "Sales Card"    ?
  ? - Department: "Sales Dept"           ?
  ? [Create Button]    ?
  ????????????????????????????????????????
  ?? Submits to: POST /api/cards
  ?? Response: New card created with ID 123
  ?? Status: ACTIVE
  ?? Success message displayed

STEP 4: VIEW CARD DETAILS
  ?? New card appears in list
  ?? Card Number: ****-****-****-1234
  ?? Expiry: 12/28
  ?? Status: ACTIVE

STEP 5: FUND THE CARD
  ????????????????????????????????????????
  ? User clicks "Fund Balance" ?
  ? Form appears:    ?
  ? - Amount: 5000            ?
  ? - Reason: "Sales rep allowance"      ?
  ? - Reference: "FUND-2025-001"         ?
  ? [Fund Button]               ?
  ????????????????????????????????????????
  ?? Submits to: POST /api/cards/123/balance/fund
  ?? Balance Before: $0.00
  ?? Balance After: $5,000.00
  ?? Success message: "Card funded successfully"

STEP 6: CREATE TRANSACTION
  ????????????????????????????????????????
  ? User navigates to Transactions     ?
  ? Clicks "Create Transaction"          ?
  ? Form appears:     ?
  ? - Card: "Sales Card" (123)    ?
  ? - Amount: 250.00             ?
  ? - Merchant: "Amazon Business"        ?
  ? - Category: "Office Supplies"     ?
  ? [Create Transaction Button]          ?
  ????????????????????????????????????????
  ?? Submits to: POST /api/transactions/card/123
  ?? Status: PENDING (awaiting completion)
  ?? Audit log entry created
  ?? Available balance: $4,750.00
  ?? Reserved balance: $250.00

STEP 7: COMPLETE TRANSACTION (Admin)
  ?? Admin navigates to Transactions
  ?? Finds pending transaction
  ?? Clicks "Complete"
  ?? Submits to: POST /api/transactions/{id}/complete
  ?? Status changes: PENDING ? COMPLETED
  ?? Available balance: $4,750.00
  ?? Used balance: $250.00
  ?? Success notification

STEP 8: VIEW TRANSACTION SUMMARY
  ????????????????????????????????????????
  ? Total Balance: $4,750.00    ?
  ? - Available: $4,750.00      ?
  ? - Reserved: $0.00       ?
  ? - Used: $250.00           ?
  ?  ?
  ? Transaction History:                 ?
  ? 1. 250.00 - Amazon Business     ?
  ?    Status: COMPLETED   ?
  ?    Date: Jan 15, 2025                ?
  ????????????????????????????????????????

STEP 9: AUDIT TRAIL
  ?? Admin views Audit Logs
  ?? Sees complete trail:
     ?? CARD_CREATED (Jan 15, 10:00)
     ?? BALANCE_FUNDED (Jan 15, 10:05)
     ?? TRANSACTION_CREATED (Jan 15, 10:10)
     ?? TRANSACTION_COMPLETED (Jan 15, 10:15)
  ?? Each entry shows: User, Time, Action, Changes
  ?? Can export report (CSV/JSON)

```

---

## 10. Role-Based Access Control Summary

```
???????????????????????????????????????????????????????????????????
?         ROLE-BASED ACCESS CONTROL (RBAC)        ?
???????????????????????????????????????????????????????????????????

ROLE: CEO
?? Full System Access
?? Cards
?  ?? Create ?
?  ?? View All ?
?  ?? Freeze/Unfreeze ?
?  ?? Delete ?
?  ?? Fund Balance ?
?? Transactions
?  ?? Create ?
?  ?? View All ?
?  ?? Complete ?
?  ?? Reverse ?
?  ?? Dispute ?
?? Approvals
?  ?? View Pending ?
?  ?? Approve All ?
?  ?? Reject All ?
?  ?? View History ?
?? Audit Logs
   ?? View All ?
   ?? Filter ?
   ?? Export ?

ROLE: CFO
?? Finance Operations
?? Cards
?  ?? Create ?
?  ?? View All ?
?  ?? Freeze/Unfreeze ?
?  ?? Delete ?
?  ?? Fund Balance ?
?? Transactions
?  ?? Create ?
?  ?? View All ?
?  ?? Complete ?
?  ?? Reverse ?
?  ?? Dispute ?
?? Approvals
?  ?? View Pending ?
?  ?? Approve (CFO-level) ?
?  ?? Reject (CFO-level) ?
?  ?? View History ?
?? Audit Logs
   ?? View All ?
   ?? Filter ?
   ?? Export ?

ROLE: ADMIN
?? Card & Transaction Management
?? Cards
?  ?? Create ?
?  ?? View All ?
?  ?? Freeze/Unfreeze ?
?  ?? Delete ?
?  ?? Fund Balance ?
?? Transactions
?  ?? Create ?
?  ?? View All ?
?  ?? Complete ?
?  ?? Reverse ?
?  ?? Dispute ?
?? Approvals
?  ?? View Pending ?
?  ?? Approve (Admin-level) ?
?  ?? Reject (Admin-level) ?
?  ?? View History ?
?? Audit Logs
   ?? View All ?
   ?? Filter ?
   ?? Export ?

ROLE: DELEGATE
?? Limited Transaction Processing
?? Cards
?  ?? Create ?
?  ?? View Own ?
?  ?? Freeze/Unfreeze ?
?  ?? Delete ?
?  ?? Fund Balance ?
?? Transactions
?  ?? Create ?
?  ?? View Own ?
?  ?? Complete ?
?  ?? Reverse ?
?  ?? Dispute ?
?? Approvals
?  ?? View Own ?
?  ?? Approve ?
?  ?? Reject ?
?  ?? View History ?
?? Audit Logs
   ?? View Own ?
   ?? Filter ?
   ?? Export ?

ROLE: AUDITOR
?? Read-Only Compliance Access
?? Cards
?  ?? Create ?
?  ?? View All ? (Read-only)
?  ?? Freeze/Unfreeze ?
?  ?? Delete ?
?  ?? Fund Balance ?
?? Transactions
?  ?? Create ?
?  ?? View All ? (Read-only)
?  ?? Complete ?
?  ?? Reverse ?
?  ?? Dispute ?
?? Approvals
?  ?? View All ? (Read-only)
?  ?? Approve ?
?  ?? Reject ?
?  ?? View History ?
?? Audit Logs
   ?? View All ?
   ?? Filter ?
   ?? Export ?

```

---

## 11. API Integration Points

```
???????????????????????????????????????????????????????????????????
?   FRONTEND API INTEGRATION POINTS      ?
???????????????????????????????????????????????????????????????????

BASE URL: https://localhost:5001/api

AUTHENTICATION ENDPOINTS
?? POST   /auth/register          ? Create new account
?? POST   /auth/login  ? Login & get JWT token
?? POST   /auth/change-password    ? Update password
?? GET    /auth/profile            ? Get current user profile

CARD MANAGEMENT ENDPOINTS
?? POST   /cards ? Create new card
?? GET    /cards          ? Get all user cards (paginated)
?? GET  /cards/{cardId}    ? Get card details
?? GET    /cards/{cardId}/details  ? Get card with balance & limits
?? PUT    /cards/{cardId}          ? Update card (nickname, intl)
?? POST   /cards/{cardId}/freeze? Freeze card (request approval)
?? POST   /cards/{cardId}/unfreeze ? Unfreeze card (request approval)
?? DELETE /cards/{cardId}       ? Delete card (request approval)
?? POST   /cards/{cardId}/limits   ? Set spending limit
?? GET    /cards/{cardId}/limits   ? Get card limits
?? GET    /cards/{cardId}/balance  ? Get balance details
?? POST   /cards/{cardId}/balance/fund ? Add funds to balance
?? PUT    /cards/{cardId}/international ? Enable/disable intl trans

TRANSACTION ENDPOINTS
?? POST   /transactions/card/{cardId}   ? Create transaction
?? GET    /transactions/card/{cardId}           ? Get card transactions
?? GET    /transactions/{transactionId}         ? Get transaction details
?? POST   /transactions/{transactionId}/complete? Complete transaction
?? POST   /transactions/{transactionId}/reverse ? Reverse transaction
?? POST   /transactions/{transactionId}/dispute ? Dispute transaction
?? GET    /transactions/card/{cardId}/summary   ? Get transaction summary

APPROVAL ENDPOINTS
?? POST   /approvals          ? Request approval
?? GET    /approvals/pending       ? Get pending approvals
?? GET    /approvals/{approvalId}     ? Get approval details
?? PUT/approvals/{approvalId}/approve    ? Approve request
?? PUT    /approvals/{approvalId}/reject ? Reject request
?? GET    /approvals/card/{cardId}/history  ? Get approval history
?? GET    /approvals/requirements/{actionType}    ? Get approval requirements

AUDIT ENDPOINTS
?? GET    /audit            ? Get audit logs (paginated)
?? GET    /audit/user/{userId}      ? Get user audit logs
?? GET    /audit/export  ? Export audit logs (CSV/JSON)

DEPARTMENT ENDPOINTS
?? POST   /departments  ? Create department (CEO only)
?? GET    /departments      ? Get all departments (paginated)
?? GET    /departments/{departmentId}? Get department details
?? PUT    /departments/{departmentId}? Update department (CEO only)
?? DELETE /departments/{departmentId}? Delete department (CEO only)

```

---

## 12. Key Features Summary

```
???????????????????????????????????????????????????????????????????
?    KEY FEATURES & CAPABILITIES          ?
???????????????????????????????????????????????????????????????????

? VIRTUAL CARD MANAGEMENT
  ?? Create/manage multiple virtual cards per user
  ?? Mask card numbers for security
  ?? Card freezing (temporary disable)
  ?? Card deletion (permanent)
  ?? Cardholder name & nickname customization

? BALANCE MANAGEMENT
  ?? Real-time balance tracking
  ?? Three-tier balance system:
  ?  ?? Available balance (ready to spend)
  ?  ?? Reserved balance (pending transactions)
  ?  ?? Used balance (completed transactions)
  ?? Fund cards with money (manual top-up)
  ?? Automatic balance updates on transactions
  ?? Balance history tracking

? SPENDING CONTROLS
  ?? Set daily, weekly, monthly, per-transaction limits
  ?? Threshold alerts (e.g., notify at 80% usage)
  ?? Limit enforcement on transactions
  ?? Multiple limits per card
  ?? Dynamic limit management

? TRANSACTION MANAGEMENT
  ?? Create transactions with merchant details
  ?? Transaction status tracking (PENDING/COMPLETED/REVERSED)
  ?? Complete pending transactions
  ?? Reverse completed transactions
  ?? Dispute suspicious transactions
  ?? Transaction history & analytics
  ?? Merchant category classification

? APPROVAL WORKFLOWS
  ?? Multi-level approval hierarchies
  ?? Role-based approval routing
  ?? 48-hour approval windows
  ?? Approval comments & audit trail
  ?? Auto-timeout for expired requests
  ?? Sensitive actions requiring approval:
 ?? Card deletion (CEO only)
     ?? Card freezing (CFO approval)
     ?? Limit changes (CFO approval)

? INTERNATIONAL TRANSACTIONS
  ?? Enable/disable per card
  ?? Geographic transaction controls
  ?? Currency handling (currently USD)
  ?? Compliance tracking

? AUDIT & COMPLIANCE
  ?? Complete audit trail of all actions
  ?? User identity tracking
  ?? Timestamp recording
  ?? Change tracking (what changed)
  ?? IP address logging
  ?? Success/failure recording
  ?? Filterable audit logs
  ?? Export capability (CSV/JSON)

? SECURITY
  ?? JWT token-based authentication
  ?? Token expiration (24 hours)
  ?? Role-based access control
  ?? Card number masking
  ?? Password hashing with BCrypt
  ?? Request validation
  ?? Error message obfuscation
  ?? HTTPS enforcement

? USER MANAGEMENT
  ?? User registration
  ?? Email-based authentication
  ?? Password management
  ?? Department assignment
  ?? Role assignment
  ?? User suspension/reactivation
  ?? Profile management

? NOTIFICATIONS
  ?? Approval request notifications
  ?? Limit warning alerts
  ?? Transaction notifications
  ?? Card status change notifications
  ?? Email delivery (configured)
  ?? Activity logging

? REPORTING & ANALYTICS
  ?? Transaction summaries
  ?? Spending analytics by merchant
  ?? Balance history
  ?? Approval workflow metrics
  ?? Audit report generation
  ?? Data export capabilities
  ?? Compliance reporting

```

---

## 13. Navigation Map

```
???????????????????????????????????????????????????????????????????
?           SITE NAVIGATION STRUCTURE         ?
???????????????????????????????????????????????????????????????????

    MAIN NAVIGATION
   ?
        ???????????????????????????????????????????????????????????
      ?         ?       ?      ?
        ?          ?     ?      ?
    ???????????    ????????????      ????????????????    ????????????
    ?Dashboard?      ?Cards     ?      ?Transactions  ?    ?Approvals ?
    ?(Home)   ?      ?          ?      ?  ? ?          ?
    ???????????      ????????????      ????????????????    ????????????
         ?                ?     ?    ?
    ?        ??????????????????         ?   ????????????????
    ?     ?    ?           ?        ?          ?
?        ?                ??        ?      ?
    ??????????????????????    ??????????? ????????????????????????????????????
    ?Quick   ??View All  ?    ?View All ? ?Create??Pending   ??Approval  ?
    ?Stats   ??Cards     ?  ?Transact.? ?Approval  ??Approvals ??History   ?
    ?  ??          ?    ?         ? ?          ??          ??     ?
    ?Recent  ??Create    ?    ?Create   ? ?(Action   ??(Action   ??(Listing) ?
    ?Activity??Card      ?    ?Transact.? ?Required) ??for Me)   ??          ?
    ?      ??          ?  ?         ? ?     ??          ??          ?
    ?      ??Card      ?    ?Transaction
    ?        ??Details   ?    ?Summary  ? ?Request   ??       ??          ?
    ?        ???    ?         ? ?Approval  ??  ??          ?
    ?        ??Balance   ?    ?Dispute  ? ?Form      ??          ??          ?
    ?      ??Mgmt      ?    ?Transact.? ?          ??          ??  ?
    ?        ?? ?    ?       ? ?Submit    ??Approve   ??View      ?
    ?        ??Limits  ?    ?  ? ?Requests  ??Requests  ??Details   ?
    ?        ??Mgmt      ?    ?         ? ?    ??        ??        ?
    ?        ??          ?    ?         ? ?View      ??Reject    ??Add       ?
    ?        ??Fund      ?    ?       ? ?History   ??Requests  ??Comments  ?
    ?        ??Balance   ?    ?     ? ?          ??  ??          ?
    ?        ??     ?    ?         ? ?Approval  ?? ??Export ?
    ?        ??Freeze    ?    ? ? ?Settings  ??    ??History   ?
    ?        ??Unfreeze  ?    ?? ?          ??          ??      ?
    ?        ??Delete    ?    ?         ? ?Approval  ?? ???
    ?        ??          ?    ?         ? ?Workflow  ??          ??     ?
    ??????????????????????    ??????????? ????????????????????????????????????


        ????????????????      ???????????????????      ????????????????
      ?Audit Logs    ??User Menu  ?      ?Settings      ?
        ?(Compliance)  ?   ?(Top Right)      ?      ?         ?
        ????????????????      ???????????????????      ????????????????
          ?  ?     ?
        ??????????????        ??????????????      ????????????????
   ?    ?     ?         ?         ?       ?
        ?   ?        ?    ?         ?       ?
    ????????????????????????????????????????????????????????????????????????
    ?View Audit ??Export    ??My Profile??Change??Preferences??Notifications
    ?Logs       ??Audit     ????Pass- ??           ??Settings     ?
    ?(Paginated)??Report    ??View Role ??word  ??Department ??         ?
    ?     ??(CSV/JSON)??  ??Form  ??Preferences??Email Alerts ?
    ?Filter by: ??        ??Email     ??      ??           ??   ?
    ?- Date     ??          ??Address   ??Submit??Language   ??Notification ?
    ?- User     ??          ??     ??      ??Timezone   ??Preferences  ?
    ?- Action   ??          ??Department??    ??           ??  ?
    ?- Resource ??          ??Created   ??Confirm??Save      ??Logout       ?
    ?       ??          ??Status    ??Password??   ??         ?
    ?Search     ??  ??    ??Changes ??         ??             ?
    ?Logs       ??          ??     ??        ?? ??        ?
    ?           ??          ????   ?? ??           ?
    ?Download   ??          ??      ??        ??    ??    ?
    ?Selected   ??          ??          ??        ??  ??     ?
    ?Log Entries??          ??  ??        ??         ??         ?
    ????????????????????????????????????????????????????????????????????????

```

---

## Summary

This user flow diagram represents a **complete virtual card management system** with:

1. **Multi-role support** (CEO, CFO, Admin, Delegate, Auditor)
2. **Secure authentication** (JWT tokens, password management)
3. **Card lifecycle management** (create, freeze, delete, fund)
4. **Dynamic balance tracking** (available, reserved, used)
5. **Transaction processing** (create, complete, reverse, dispute)
6. **Multi-level approvals** (hierarchical authorization)
7. **Comprehensive auditing** (compliance and reporting)
8. **Role-based access control** (RBAC)

The system ensures **security**, **compliance**, and **ease of use** for corporate virtual card management.

